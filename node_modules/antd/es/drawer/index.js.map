{"version":3,"sources":["drawer/index.jsx"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","React","RcDrawer","createReactContext","classNames","omit","warning","Icon","withConfigConsumer","tuple","DrawerContext","PlacementTypes","Drawer","arguments","state","push","setState","pull","onDestroyTransitionEnd","isDestroyOnClose","getDestroyOnClose","props","visible","destroyClose","forceUpdate","destroyOnClose","getPushTransform","placement","getRcDrawerStyle","zIndex","style","transform","undefined","renderBody","bodyStyle","drawerStyle","prefixCls","containerStyle","overflow","height","opacity","transition","renderHeader","children","renderProvider","value","_a","className","wrapClassName","width","mask","rest","haveMask","parentDrawer","offsetStyle","preProps","title","closable","headerStyle","headerClassName","renderCloseIcon","onClose","Component","defaultProps","maskClosable","level","keyboard"],"mappings":"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","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport RcDrawer from 'rc-drawer';\nimport createReactContext from '@ant-design/create-react-context';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport warning from '../_util/warning';\nimport Icon from '../icon';\nimport { withConfigConsumer } from '../config-provider';\nimport { tuple } from '../_util/type';\nconst DrawerContext = createReactContext(null);\nconst PlacementTypes = tuple('top', 'right', 'bottom', 'left');\nclass Drawer extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            push: false,\n        };\n        this.push = () => {\n            this.setState({\n                push: true,\n            });\n        };\n        this.pull = () => {\n            this.setState({\n                push: false,\n            });\n        };\n        this.onDestroyTransitionEnd = () => {\n            const isDestroyOnClose = this.getDestroyOnClose();\n            if (!isDestroyOnClose) {\n                return;\n            }\n            if (!this.props.visible) {\n                this.destroyClose = true;\n                this.forceUpdate();\n            }\n        };\n        this.getDestroyOnClose = () => this.props.destroyOnClose && !this.props.visible;\n        // get drawer push width or height\n        this.getPushTransform = (placement) => {\n            if (placement === 'left' || placement === 'right') {\n                return `translateX(${placement === 'left' ? 180 : -180}px)`;\n            }\n            if (placement === 'top' || placement === 'bottom') {\n                return `translateY(${placement === 'top' ? 180 : -180}px)`;\n            }\n        };\n        this.getRcDrawerStyle = () => {\n            const { zIndex, placement, style } = this.props;\n            const { push } = this.state;\n            return Object.assign({ zIndex, transform: push ? this.getPushTransform(placement) : undefined }, style);\n        };\n        // render drawer body dom\n        this.renderBody = () => {\n            const { bodyStyle, drawerStyle, placement, prefixCls, visible } = this.props;\n            if (this.destroyClose && !visible) {\n                return null;\n            }\n            this.destroyClose = false;\n            const containerStyle = placement === 'left' || placement === 'right'\n                ? {\n                    overflow: 'auto',\n                    height: '100%',\n                }\n                : {};\n            const isDestroyOnClose = this.getDestroyOnClose();\n            if (isDestroyOnClose) {\n                // Increase the opacity transition, delete children after closing.\n                containerStyle.opacity = 0;\n                containerStyle.transition = 'opacity .3s';\n            }\n            return (<div className={`${prefixCls}-wrapper-body`} style={Object.assign(Object.assign({}, containerStyle), drawerStyle)} onTransitionEnd={this.onDestroyTransitionEnd}>\n        {this.renderHeader()}\n        <div className={`${prefixCls}-body`} style={bodyStyle}>\n          {this.props.children}\n        </div>\n      </div>);\n        };\n        // render Provider for Multi-level drawer\n        this.renderProvider = (value) => {\n            const _a = this.props, { prefixCls, placement, className, wrapClassName, width, height, mask } = _a, rest = __rest(_a, [\"prefixCls\", \"placement\", \"className\", \"wrapClassName\", \"width\", \"height\", \"mask\"]);\n            warning(wrapClassName === undefined, 'Drawer', 'wrapClassName is deprecated, please use className instead.');\n            const haveMask = mask ? '' : 'no-mask';\n            this.parentDrawer = value;\n            const offsetStyle = {};\n            if (placement === 'left' || placement === 'right') {\n                offsetStyle.width = width;\n            }\n            else {\n                offsetStyle.height = height;\n            }\n            return (<DrawerContext.Provider value={this}>\n        <RcDrawer handler={false} {...omit(rest, [\n                'zIndex',\n                'style',\n                'closable',\n                'destroyOnClose',\n                'drawerStyle',\n                'headerStyle',\n                'bodyStyle',\n                'title',\n                'push',\n                'visible',\n                'getPopupContainer',\n                'rootPrefixCls',\n                'getPrefixCls',\n                'renderEmpty',\n                'csp',\n                'pageHeader',\n                'autoInsertSpaceInButton',\n            ])} {...offsetStyle} prefixCls={prefixCls} open={this.props.visible} showMask={mask} placement={placement} style={this.getRcDrawerStyle()} className={classNames(wrapClassName, className, haveMask)}>\n          {this.renderBody()}\n        </RcDrawer>\n      </DrawerContext.Provider>);\n        };\n    }\n    componentDidMount() {\n        // fix: delete drawer in child and re-render, no push started.\n        // <Drawer>{show && <Drawer />}</Drawer>\n        const { visible } = this.props;\n        if (visible && this.parentDrawer) {\n            this.parentDrawer.push();\n        }\n    }\n    componentDidUpdate(preProps) {\n        const { visible } = this.props;\n        if (preProps.visible !== visible && this.parentDrawer) {\n            if (visible) {\n                this.parentDrawer.push();\n            }\n            else {\n                this.parentDrawer.pull();\n            }\n        }\n    }\n    componentWillUnmount() {\n        // unmount drawer in child, clear push.\n        if (this.parentDrawer) {\n            this.parentDrawer.pull();\n            this.parentDrawer = null;\n        }\n    }\n    renderHeader() {\n        const { title, prefixCls, closable, headerStyle } = this.props;\n        if (!title && !closable) {\n            return null;\n        }\n        const headerClassName = title ? `${prefixCls}-header` : `${prefixCls}-header-no-title`;\n        return (<div className={headerClassName} style={headerStyle}>\n        {title && <div className={`${prefixCls}-title`}>{title}</div>}\n        {closable && this.renderCloseIcon()}\n      </div>);\n    }\n    renderCloseIcon() {\n        const { closable, prefixCls, onClose } = this.props;\n        return (closable && (\n        // eslint-disable-next-line react/button-has-type\n        <button onClick={onClose} aria-label=\"Close\" className={`${prefixCls}-close`}>\n          <Icon type=\"close\"/>\n        </button>));\n    }\n    render() {\n        return <DrawerContext.Consumer>{this.renderProvider}</DrawerContext.Consumer>;\n    }\n}\nDrawer.defaultProps = {\n    width: 256,\n    height: 256,\n    closable: true,\n    placement: 'right',\n    maskClosable: true,\n    mask: true,\n    level: null,\n    keyboard: true,\n};\nexport default withConfigConsumer({\n    prefixCls: 'drawer',\n})(Drawer);\n"],"file":"index.js"}